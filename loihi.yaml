---
# Energy and time estimates of different events, generated from SPICE
#  simulations of Loihi.  All numbers were taken from:
#  "Loihi: A Neuromorphic Manycore Processor with On-Chip Learning" (2018)
#  M. Davies et al
architecture:
  name: loihi_chip
  attributes:
    topology: mesh
    dimensions: 2
    width: 8
    cost:
      east_west:
        energy: 3.0e-12
        time: 4.1e-9
      north_south:
        energy: 4.0e-12
        time: 6.5e-9
      global_barrier:
        time: 299.0e-9

  tile:
    - name: loihi_tile[0..31]
      core:
        - name: loihi_core[0..3]
          soma:
            - name: core_lif
              attributes:
                type: digital
                model: leaky_integrate
                hard_reset: True
                soft_reset: True
                cost:
                  active:
                    energy: 81.0e-12
                    time: 8.4e-9
                  inactive:
                    energy: 52.0e-12
                    time: 5.3e-9
          synapse:
            - name: core_synapses
              attributes:
                model: cuba
                weight_bits: 4
                cost: # Synaptic spike op cost accounted for here
                  energy: 23.6e-12
                  time: 3.5e-9
          dendrite:
          - name: core_dendrites
            attributes:
              model: leaky_integrate
              cost: # Same as soma (uses same compartment hardware)
                energy: 81.0e-12
                time: 8.4e-9
                #operations: and, or, multiply
          axon_in:
            - name: core_in
              # axon_in acts like input ports to the arch or subtree.
              #  For Loihi we have at most 4096 slots to route packets to
              #  different cores.
              attributes:
                fan_in: 4096
                protocol: dest_axon
          axon_out:
            - name: core_out
              # axon_out acts like output ports. Loihi needs to figure out the
              #  destination tiles and axons to send spikes to. If transmitting
              #  to different neurons on a common core, those are grouped into
              #  one axon. We have 4096 slots on Loihi to send out packets to
              #  different receiving axons (i.e. 4096 unique cores).
              attributes:
                fan_out: 4096
                protocol: dest_axon
                cost:
                  energy: 1.7e-12
                  time: 2.1e-9

          ## TODO: support memory blocks in the future e.g.
          #memory:
          #  - name: synapse_sram
          #    # The SRAM is used to store synaptic info, neuron state and
          #    #  dendrite structures. In the case of convolutional networks
          #    #  weights might be shared across compartments, reducing the
          #    #  load on SRAM
          #    attributes:
          #      size: 1000000
          #      mem_type: sram
